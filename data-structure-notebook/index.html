<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
<meta name="google-site-verification" content="wSUWWkv_QhNXB_N6r3rOSU2YlmmWxYBk6UWVlgu1q94" />
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/logo.gif">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/logo.gif">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="google295e26d511c4c6ad.html">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"blog.enkr1.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":true,"sidebar":{"position":"left","width":300,"display":"post","padding":0,"offset":0,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"buttons","active":"disqus","storage":true,"lazyload":true,"nav":null,"activeClass":"disqus"},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":-1,"unescape":true,"preload":true},"motion":{"enable":true,"async":false,"transition":{"post_block":"slideDownBigIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="Delve into the core concepts, practical implementations, and advanced techniques of essential data structures. This notebook covers topics like Union-Find, path compression, union by rank, and more, p">
<meta property="og:type" content="article">
<meta property="og:title" content="Data Structure Notebook">
<meta property="og:url" content="https://blog.enkr1.com/data-structure-notebook/index.html">
<meta property="og:site_name" content="ENKR&#39;s Blog | Jing Hui PANG">
<meta property="og:description" content="Delve into the core concepts, practical implementations, and advanced techniques of essential data structures. This notebook covers topics like Union-Find, path compression, union by rank, and more, p">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2024-08-29T15:56:49.000Z">
<meta property="article:modified_time" content="2024-11-03T16:53:06.087Z">
<meta property="article:author" content="Jing Hui PANG | 彭竞辉 | ENKR">
<meta property="article:tag" content="programming">
<meta property="article:tag" content="data-structures">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://blog.enkr1.com/data-structure-notebook/">




<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>



<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-4N4L18VB12"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-4N4L18VB12');
</script>



<!-- Firebase -->
<!-- enkr1.github.io -->
<script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.1/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.11.1/firebase-analytics.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const _0x5ea0f9=_0x103b;function _0x103b(_0x53ae50,_0x59847d){const _0x2843ac=_0x1ad7();_0x103b=function(_0x55d786,_0x3cee64){_0x55d786=_0x55d786-(-0xcfb+0x1f9f+-0x1124);let _0x59a379=_0x2843ac[_0x55d786];return _0x59a379;};return _0x103b(_0x53ae50,_0x59847d);}function _0x1ad7(){const _0x1f01af=['G-TJPENBTD','AIzaSyBxex','17063YPgNxh','VzGzOqDUGF','1:71411607','216YlyPzv','hexo-blog-','7141160759','4c5895d438','16110beXadU','qAetlFUSo','548402cjqBQm','9ccea','zHVT_-oYxk','enkr1.com','10aKAiit','725816aYbUzX','38661mJjSzZ','fb244020c3','pot.com','5930586lHPClx','593:web:d0','52OsOUFf','9ccea.apps','1053695BAfudF'];_0x1ad7=function(){return _0x1f01af;};return _0x1ad7();}(function(_0x5f4332,_0x76084c){const _0x2e4582=_0x103b;const _0x2c9a86=_0x5f4332();while(!![]){try{const _0x40bc56=parseInt(_0x2e4582(0x184))/(-0x92c+-0x2f*-0x2+-0xcd*-0xb)+-parseInt(_0x2e4582(0x18d))/(-0xf68+-0x11*-0x1bb+-0xe01)+parseInt(_0x2e4582(0x18b))/(0x546+-0x4*-0x19b+-0xbaf)*(parseInt(_0x2e4582(0x198))/(-0x91*0x16+-0x215b*-0x1+-0x1*0x14e1))+-parseInt(_0x2e4582(0x181))/(0x181e+-0x295*0xd+0x978)+parseInt(_0x2e4582(0x187))/(-0x2*0x10ad+-0x14a9+0x3609)*(-parseInt(_0x2e4582(0x193))/(0x5*0x4e8+-0xc8d+0x5fa*-0x2))+parseInt(_0x2e4582(0x192))/(-0x1*0x621+0x1f*0x95+-0xbe2)+parseInt(_0x2e4582(0x196))/(-0x1494+-0x3*0x7ae+0x2ba7)*(parseInt(_0x2e4582(0x191))/(-0x1*0xec7+-0x5*-0x2cf+0xc6));if(_0x40bc56===_0x76084c){break;}else{_0x2c9a86['push'](_0x2c9a86['shift']());}}catch(_0x4baedd){_0x2c9a86['push'](_0x2c9a86['shift']());}}}(_0x1ad7,-0x1*0x1a731+-0x443d4+-0x1*-0x83fd7));const firebaseConfig={'apiKey':_0x5ea0f9(0x183)+_0x5ea0f9(0x185)+_0x5ea0f9(0x18f)+_0x5ea0f9(0x18c),'authDomain':_0x5ea0f9(0x190),'projectId':_0x5ea0f9(0x188)+_0x5ea0f9(0x18e),'storageBucket':_0x5ea0f9(0x188)+_0x5ea0f9(0x180)+_0x5ea0f9(0x195),'messagingSenderId':_0x5ea0f9(0x189)+'3','appId':_0x5ea0f9(0x186)+_0x5ea0f9(0x197)+_0x5ea0f9(0x194)+_0x5ea0f9(0x18a),'measurementId':_0x5ea0f9(0x182)+'NS'};

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
</script>
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/ilyabirman-likely@2/release/likely.min.css">
  <title>Data Structure Notebook | ENKR's Blog | Jing Hui PANG</title>
  
    <script>
      function sendPageView() {
        if (CONFIG.hostname !== location.hostname) return;
        var uid = localStorage.getItem('uid') || (Math.random() + '.' + Math.random());
        localStorage.setItem('uid', uid);
        navigator.sendBeacon('https://www.google-analytics.com/collect', new URLSearchParams({
          v  : 1,
          tid: 'G-4N4L18VB12',
          cid: uid,
          t  : 'pageview',
          dp : encodeURIComponent(location.pathname)
        }));
      }
      document.addEventListener('pjax:complete', sendPageView);
      sendPageView();
    </script>






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="ENKR's Blog | Jing Hui PANG" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">ENKR's Blog | Jing Hui PANG</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Where code meets creativity.</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-journals">

    <a href="/journals/" rel="section"><i class="fa fa-pencil-alt fa-fw"></i>Journals</a>

  </li>
        <li class="menu-item menu-item-about-me">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About Me</a>

  </li>
        <li class="menu-item menu-item-connect-with-me">

    <span class="exturl" data-url="aHR0cHM6Ly9jYWwuY29tL2Vua3IxL2NvbGxhYm9yYXRpb25zP2xheW91dD1jb2x1bW5fdmlldw=="><i class="fa fa-calendar fa-fw"></i>Connect with Me</span>

  </li>
        <li class="menu-item menu-item-my-platforms">

    <span class="exturl" data-url="aHR0cHM6Ly9lbmtyMS5naXRodWIuaW8vcGxhdGZvcm1zLw=="><i class="fa fa-link fa-fw"></i>My Platforms</span>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags<span class="badge">142</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-list fa-fw"></i>Categories<span class="badge">59</span></a>

  </li>
        <li class="menu-item menu-item-notebooks-(all)">

    <a href="/categories/Notebooks/" rel="section"><i class="fa fa-book fa-fw"></i>Notebooks (All)</a>

  </li>
        <li class="menu-item menu-item-notebooks-(tech)">

    <a href="/categories/Software-Engineering/Programming-Languages/" rel="section"><i class="fa fa-book fa-fw"></i>Notebooks (Tech)</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-history fa-fw"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-sitemap">

    <a href="/sitemap.txt" rel="section"><i class="fa fa-sitemap fa-fw"></i>Sitemap</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://blog.enkr1.com/data-structure-notebook/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jing Hui PANG | 彭竞辉 | ENKR">
      <meta itemprop="description" content="Words for my future self—a space for insights and creativity. Along the way, I’ll be journaling my journey, diving into programming tips, beatboxing stories and sharing insights on fitness, music, and more to inspire anyone chasing their own path.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ENKR's Blog | Jing Hui PANG">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Data Structure Notebook
        </h1>

        <div class="post-meta">

<!--
NOTE: created_at
-->
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: Thursday, 29 August 2024 23:56:49 PM 23:56:49 PM" itemprop="dateCreated datePublished" datetime="2024-08-29T23:56:49+08:00">Thursday, 29 August 2024 23:56:49 PM</time>
            </span>

<!--
NOTE: created_at
-->
<!--
-->
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: Monday, 4 November 2024 00:53:06 AM 00:53:06 AM" itemprop="dateModified" datetime="2024-11-04T00:53:06+08:00">Monday, 4 November 2024 00:53:06 AM</time>
              </span>

            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Software-Engineering/" itemprop="url" rel="index"><span itemprop="name">Software Engineering</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Software-Engineering/Data-Structures-Algorithms/" itemprop="url" rel="index"><span itemprop="name">Data Structures & Algorithms</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Notebooks/" itemprop="url" rel="index"><span itemprop="name">Notebooks</span></a>
                </span>
            </span>

          


<!--
NEW: Added a break after category
-->
  <br>


<!--
NOTE: word count
-->
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
              <span>3k</span>
            </span>

<!--
NOTE: reading time
-->
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
              <span>11 mins.</span>
            </span>


<!--
NOTE: disqus
-->
  
  <span class="post-meta-item disqus-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/data-structure-notebook/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="data-structure-notebook/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

<!--
NOTE: views count
-->
            <span class="post-meta-item" title="Views">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <!--
              NOTE: Hide "Views: "
              <span class="post-meta-item-text">Views: </span>
              -->
              <b><span class="firestore-visitors-count">loading ...</span></b>
            </span>
            <div class="post-description">Delve into the core concepts, practical implementations, and advanced techniques of essential data structures. This notebook covers topics like Union-Find, path compression, union by rank, and more, providing developers with the knowledge to tackle complex algorithmic challenges. Ideal for those looking to deepen their understanding of data structures and their applications in solving diverse problems.</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="union-find-dsu">Union Find (DSU)</h2>
<p><a
target="_blank" rel="noopener" href="https://www.geeksforgeeks.org/introduction-to-disjoint-set-data-structure-or-union-find-algorithm/">Union-Find</a>,
also known as <strong>Disjoint Set Union (DSU)</strong>, is a data
structure that keeps track of a set of elements partitioned into a
number of disjoint (non-overlapping) subsets. It provides efficient
methods for two key operations: (1) <strong>Union</strong>: Merging two
subsets into a single subset. (2) <strong>Find</strong>: Determining
which subset a particular element is in. This can be used to check if
two elements are in the same subset.</p>
<p>Union-Find is particularly useful in problems that involve
<strong>finding connected components in a graph</strong>, such as
<strong>detecting cycles in an undirected graph</strong>, solving
<strong>connectivity problems</strong>. For instance, grouping stones in
the <a
target="_blank" rel="noopener" href="https://leetcode.com/problems/most-stones-removed-with-same-row-or-column/description/">Most
Stones Removed with Same Row or Column</a> problem.</p>
<h3 id="components-of-union-find">Components of Union-Find</h3>
<ul>
<li>The <strong>Parent Array/Map</strong> keeps track of the
"root/leader" or <strong>representative</strong> of each set. Initially,
every element is its own parent, meaning every element is in its own
distinct set. As sets are merged (unioned), this array/map is updated to
reflect which elements share the same representative.</li>
<li><strong>Path Compression</strong>: While performing
<code>find</code>, we make the structure flatter by making each node
point directly to the root. This significantly speeds up future
operations, reducing the tree height and making the amortized time
complexity of both <code>find</code> and <code>union</code> nearly
constant, i.e., <span class="math inline">\(O(\alpha(n))\)</span>, where
<span class="math inline">\(\alpha\)</span> is the inverse Ackermann
function.</li>
<li><strong>Union by Rank/Size</strong>: To keep the tree shallow and
operations fast, the smaller tree (in terms of rank or size) is usually
attached under the root of the larger tree. <strong>Rank</strong> refers
to an approximate measure of tree depth, while <strong>Size</strong>
refers to the number of elements in the tree. This ensures that the tree
does not grow too deep, which would slow down future operations.</li>
</ul>
<h3 id="implementing-union-find">Implementing Union-Find</h3>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">UnionFind</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">parent</span> = <span class="keyword">new</span> <span class="title class_">Map</span>();</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">rank</span> = <span class="keyword">new</span> <span class="title class_">Map</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Initial parent map:&quot;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>([...<span class="variable language_">this</span>.<span class="property">parent</span>]));</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Initial rank map:&quot;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>([...<span class="variable language_">this</span>.<span class="property">rank</span>]));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">add</span>(<span class="params">x</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">parent</span>.<span class="title function_">has</span>(x)) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">parent</span>.<span class="title function_">set</span>(x, x);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">rank</span>.<span class="title function_">set</span>(x, <span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">find</span>(<span class="params">x</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`~~&gt; Find(<span class="subst">$&#123;x&#125;</span>)`</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Find the root of the element x</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">parent</span>.<span class="title function_">get</span>(x) !== x) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Path compression for element <span class="subst">$&#123;x&#125;</span>`</span>);</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">parent</span>.<span class="title function_">set</span>(x, <span class="variable language_">this</span>.<span class="title function_">find</span>(<span class="variable language_">this</span>.<span class="property">parent</span>.<span class="title function_">get</span>(x))); <span class="comment">// Path compression</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Find(<span class="subst">$&#123;x&#125;</span>) -&gt; Root is <span class="subst">$&#123;<span class="variable language_">this</span>.parent.get(x)&#125;</span>`</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">parent</span>.<span class="title function_">get</span>(x);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">union</span>(<span class="params">x, y</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`\nUnion(<span class="subst">$&#123;x&#125;</span>, <span class="subst">$&#123;y&#125;</span>)`</span>);</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">add</span>(x);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">add</span>(y);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Find the roots of x and y</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`~&gt; before find:`</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>([...<span class="variable language_">this</span>.<span class="property">parent</span>]));</span><br><span class="line">    <span class="keyword">let</span> rootX = <span class="variable language_">this</span>.<span class="title function_">find</span>(x);</span><br><span class="line">    <span class="keyword">let</span> rootY = <span class="variable language_">this</span>.<span class="title function_">find</span>(y);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (rootX !== rootY) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Union(<span class="subst">$&#123;x&#125;</span>, <span class="subst">$&#123;y&#125;</span>) -&gt; Already in the same set`</span>);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> rankX = <span class="variable language_">this</span>.<span class="property">rank</span>.<span class="title function_">get</span>(rootX);</span><br><span class="line">    <span class="keyword">let</span> rankY = <span class="variable language_">this</span>.<span class="property">rank</span>.<span class="title function_">get</span>(rootY);</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`rootX: <span class="subst">$&#123;rootX&#125;</span>, \nrootY: <span class="subst">$&#123;rootY&#125;</span>, \nrankX: <span class="subst">$&#123;rankX&#125;</span>, \nrankY: <span class="subst">$&#123;rankY&#125;</span>`</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`~~~&gt; after find:`</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>([...<span class="variable language_">this</span>.<span class="property">parent</span>]));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// If they have different roots, perform union</span></span><br><span class="line">    <span class="keyword">if</span> (rankX &gt; rankY) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`(x &lt;- y) -&gt; Root of <span class="subst">$&#123;y&#125;</span> (root <span class="subst">$&#123;rootY&#125;</span>) attached to root <span class="subst">$&#123;rootX&#125;</span>`</span>);</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">parent</span>.<span class="title function_">set</span>(rootY, rootX);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (rankX &lt; rankY) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`(x -&gt; y) -&gt; Root of <span class="subst">$&#123;x&#125;</span> (root <span class="subst">$&#123;rootX&#125;</span>) attached to root <span class="subst">$&#123;rootY&#125;</span>`</span>);</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">parent</span>.<span class="title function_">set</span>(rootX, rootY);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`(x &lt;- y) -&gt; Roots are equal, root <span class="subst">$&#123;rootY&#125;</span> attached to root <span class="subst">$&#123;rootX&#125;</span>`</span>);</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">parent</span>.<span class="title function_">set</span>(rootY, rootX);</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">rank</span>.<span class="title function_">set</span>(rootX, rankX + <span class="number">1</span>); <span class="comment">// ONLY increase the rank of the new root</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`parent:  <span class="subst">$&#123;<span class="built_in">JSON</span>.stringify([...<span class="variable language_">this</span>.parent])&#125;</span>`</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`rank:    <span class="subst">$&#123;<span class="built_in">JSON</span>.stringify([...<span class="variable language_">this</span>.rank])&#125;</span>`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Path compression is a crucial optimization in Union-Find that ensures
the data structure remains efficient over a series of operations. It
works by flattening the tree during the find operation so that all nodes
in a set point directly to the root, minimizing the depth of the tree
and speeding up future operations. The example you provided demonstrates
how path compression helps keep the structure flat and efficient,
particularly when combining different sets through union operations.
Path compression only happens when find() is called. If find() is never
called on an element, that element may still point to an intermediate
parent rather than directly to the root. Path compression is a key
optimisation that helps flatten the Union-Find tree. Without it, the
tree could become deep, making future operations slower. Always ensure
that find() is called when necessary to maintain an optimised
structure.</p>
</blockquote>
<p>Without path compression, if there were many islands connected in a
long chain, the time complexity for each find() operation could become
quite large. With path compression, we ensure that the trees stay
shallow, making future queries much faster.</p>
<h3 id="key-points-to-understand">Key Points to Understand</h3>
<h4 id="find-operation">Find Operation</h4>
<ul>
<li>In the <code>find</code> operation, if <code>x</code> is not the
root of its set, we recursively find its root and perform path
compression by setting the parent of <code>x</code> directly to the
root.</li>
<li><strong>Path compression</strong> makes the tree flatter, leading to
faster future operations.</li>
</ul>
<h4 id="union-operation">Union Operation</h4>
<ul>
<li>In the <code>union</code> operation, if the roots of <code>x</code>
and <code>y</code> are different, we connect them.</li>
<li><strong>Union by rank</strong> ensures that we always attach the
smaller tree to the larger tree, minimising the tree height and
improving efficiency.</li>
</ul>
<h4 id="time-complexity">Time Complexity</h4>
<ul>
<li>With both path compression and union by rank, the time complexity
for each operation is almost constant, <span
class="math inline">\(O(\alpha(n))\)</span>, where <span
class="math inline">\(\alpha\)</span> is the inverse Ackermann function,
which grows very slowly.</li>
</ul>
<h3 id="example-usage">Example Usage</h3>
<p>To illustrate how Union-Find works, let's consider an example of
merging sets and finding connected components.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> uf = <span class="keyword">new</span> <span class="title class_">UnionFind</span>(<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">uf.<span class="title function_">union</span>(<span class="number">1</span>, <span class="number">2</span>); <span class="comment">// Union sets containing 1 and 2</span></span><br><span class="line">uf.<span class="title function_">union</span>(<span class="number">2</span>, <span class="number">3</span>); <span class="comment">// Union sets containing 2 and 3</span></span><br><span class="line">uf.<span class="title function_">union</span>(<span class="number">4</span>, <span class="number">5</span>); <span class="comment">// Union sets containing 4 and 5</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(uf.<span class="title function_">find</span>(<span class="number">1</span>)); <span class="comment">// Should return the root of the set containing 1 (same as 2, 3)</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(uf.<span class="title function_">find</span>(<span class="number">3</span>)); <span class="comment">// Should return the same root as above</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(uf.<span class="title function_">find</span>(<span class="number">4</span>)); <span class="comment">// Should return the root of the set containing 4 (same as 5)</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(uf.<span class="title function_">find</span>(<span class="number">6</span>)); <span class="comment">// Should return 6, as it&#x27;s not connected to others</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Check if 1 and 3 are in the same set</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(uf.<span class="title function_">find</span>(<span class="number">1</span>) === uf.<span class="title function_">find</span>(<span class="number">3</span>)); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Check if 1 and 4 are in the same set</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(uf.<span class="title function_">find</span>(<span class="number">1</span>) === uf.<span class="title function_">find</span>(<span class="number">4</span>)); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Create an instance of UnionFind with 8 elements (0 through 7)</span></span><br><span class="line"><span class="keyword">let</span> uf = <span class="keyword">new</span> <span class="title class_">UnionFind</span>(<span class="number">8</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Test Cases</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;\nTest Case 1: Union operations&quot;</span>);</span><br><span class="line">uf.<span class="title function_">union</span>(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">uf.<span class="title function_">union</span>(<span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line">uf.<span class="title function_">union</span>(<span class="number">4</span>, <span class="number">5</span>);</span><br><span class="line">uf.<span class="title function_">union</span>(<span class="number">6</span>, <span class="number">7</span>);</span><br><span class="line">uf.<span class="title function_">union</span>(<span class="number">5</span>, <span class="number">6</span>);</span><br><span class="line">uf.<span class="title function_">union</span>(<span class="number">3</span>, <span class="number">7</span>); <span class="comment">// This will connect two previously separate sets</span></span><br></pre></td></tr></table></figure>
<h4 id="example-number-of-islands">Example: <a
target="_blank" rel="noopener" href="https://leetcode.com/problems/number-of-islands/description/">Number
of Islands</a></h4>
<p>While doing Number of Islands, you will hit the issue of having 2D
array, there is a trick to make 2nd input (Y) unique, by:
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> y = i * cols + j;</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>The formula <code>i * cols + j</code> converts a 2D grid position
<code>(i, j)</code> into a unique 1D index by counting how many total
elements are in the rows before <code>i</code> and adding the position
<code>j</code> in the current row.</p>
</blockquote>
<figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="params">(<span class="number">0</span>, <span class="number">0</span>)</span> -&gt;</span> index <span class="number">0</span></span><br><span class="line"><span class="function"><span class="params">(<span class="number">0</span>, <span class="number">1</span>)</span> -&gt;</span> index <span class="number">1</span></span><br><span class="line"><span class="function"><span class="params">(<span class="number">0</span>, <span class="number">2</span>)</span> -&gt;</span> index <span class="number">2</span></span><br><span class="line"><span class="function"><span class="params">(<span class="number">1</span>, <span class="number">0</span>)</span> -&gt;</span> index <span class="number">3</span></span><br><span class="line"><span class="function"><span class="params">(<span class="number">1</span>, <span class="number">1</span>)</span> -&gt;</span> index <span class="number">4</span></span><br><span class="line"><span class="function"><span class="params">(<span class="number">1</span>, <span class="number">2</span>)</span> -&gt;</span> index <span class="number">5</span></span><br><span class="line"><span class="function"><span class="params">(<span class="number">2</span>, <span class="number">0</span>)</span> -&gt;</span> index <span class="number">6</span></span><br><span class="line"><span class="function"><span class="params">(<span class="number">2</span>, <span class="number">1</span>)</span> -&gt;</span> index <span class="number">7</span></span><br><span class="line"><span class="function"><span class="params">(<span class="number">2</span>, <span class="number">2</span>)</span> -&gt;</span> index <span class="number">8</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> grid = [</span><br><span class="line">  [<span class="string">&quot;1&quot;</span>, <span class="string">&quot;1&quot;</span>, <span class="string">&quot;0&quot;</span>],</span><br><span class="line">  [<span class="string">&quot;1&quot;</span>, <span class="string">&quot;0&quot;</span>, <span class="string">&quot;0&quot;</span>],</span><br><span class="line">  [<span class="string">&quot;0&quot;</span>, <span class="string">&quot;0&quot;</span>, <span class="string">&quot;1&quot;</span>]</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">print2Dto1D</span> = (<span class="params">grid</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> rows = grid.<span class="property">length</span>;</span><br><span class="line">  <span class="keyword">const</span> cols = grid[<span class="number">0</span>].<span class="property">length</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">getIndex</span> = (<span class="params">i, j</span>) =&gt; i * cols + j;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; rows; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; cols; j++) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Grid(<span class="subst">$&#123;i&#125;</span>, <span class="subst">$&#123;j&#125;</span>) = 1D index: <span class="subst">$&#123;getIndex(i, j)&#125;</span>`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title function_">print2Dto1D</span>(grid);</span><br></pre></td></tr></table></figure>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Grid</span>(<span class="number">0</span>, <span class="number">0</span>) = <span class="number">1</span>D index: <span class="number">0</span></span><br><span class="line"><span class="attribute">Grid</span>(<span class="number">0</span>, <span class="number">1</span>) = <span class="number">1</span>D index: <span class="number">1</span></span><br><span class="line"><span class="attribute">Grid</span>(<span class="number">0</span>, <span class="number">2</span>) = <span class="number">1</span>D index: <span class="number">2</span></span><br><span class="line"><span class="attribute">Grid</span>(<span class="number">1</span>, <span class="number">0</span>) = <span class="number">1</span>D index: <span class="number">3</span></span><br><span class="line"><span class="attribute">Grid</span>(<span class="number">1</span>, <span class="number">1</span>) = <span class="number">1</span>D index: <span class="number">4</span></span><br><span class="line"><span class="attribute">Grid</span>(<span class="number">1</span>, <span class="number">2</span>) = <span class="number">1</span>D index: <span class="number">5</span></span><br><span class="line"><span class="attribute">Grid</span>(<span class="number">2</span>, <span class="number">0</span>) = <span class="number">1</span>D index: <span class="number">6</span></span><br><span class="line"><span class="attribute">Grid</span>(<span class="number">2</span>, <span class="number">1</span>) = <span class="number">1</span>D index: <span class="number">7</span></span><br><span class="line"><span class="attribute">Grid</span>(<span class="number">2</span>, <span class="number">2</span>) = <span class="number">1</span>D index: <span class="number">8</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">numIslands</span> = (<span class="params">grid</span>) =&gt; &#123;</span><br><span class="line">    <span class="comment">// 0 = water</span></span><br><span class="line">    <span class="comment">// 1 = land</span></span><br><span class="line">    <span class="keyword">const</span> uf = <span class="keyword">new</span> <span class="title class_">UnionFind</span>();</span><br><span class="line">    <span class="keyword">let</span> rows = grid.<span class="property">length</span>; <span class="comment">// row</span></span><br><span class="line">    <span class="keyword">let</span> cols = grid[<span class="number">0</span>].<span class="property">length</span>; <span class="comment">// col</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">getIndex</span> = (<span class="params">i, j</span>) =&gt; (i * cols) + j;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// console.log(`uf: $&#123;uf&#125;`);</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; rows; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; cols; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (grid[i][j] === <span class="string">&quot;0&quot;</span>) <span class="keyword">continue</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">let</span> currIndex = <span class="title function_">getIndex</span>(i, j);</span><br><span class="line">            <span class="comment">// add current land</span></span><br><span class="line">            uf.<span class="title function_">add</span>(currIndex);</span><br><span class="line">            <span class="comment">// right</span></span><br><span class="line">            <span class="keyword">if</span> (((j + <span class="number">1</span>) &lt; cols) &amp;&amp; grid[i][j + <span class="number">1</span>] === <span class="string">&quot;1&quot;</span>) uf.<span class="title function_">union</span>(currIndex, <span class="title function_">getIndex</span>(i, j + <span class="number">1</span>));</span><br><span class="line">            <span class="comment">// bottom</span></span><br><span class="line">            <span class="keyword">if</span> (((i + <span class="number">1</span>) &lt; rows) &amp;&amp; grid[i + <span class="number">1</span>][j] === <span class="string">&quot;1&quot;</span>) uf.<span class="title function_">union</span>(currIndex, <span class="title function_">getIndex</span>(i + <span class="number">1</span>, j));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// console.log(`uf: $&#123;uf&#125;`);</span></span><br><span class="line">    <span class="keyword">let</span> uniqueIslands = <span class="keyword">new</span> <span class="title class_">Set</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; rows; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; cols; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (grid[i][j] === <span class="string">&quot;1&quot;</span>) uniqueIslands.<span class="title function_">add</span>(uf.<span class="title function_">find</span>(<span class="title function_">getIndex</span>(i, j)));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// console.log(`uniqueIslands: $&#123;uniqueIslands.size&#125;`);</span></span><br><span class="line">    <span class="keyword">return</span> uniqueIslands.<span class="property">size</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="applications-of-union-find">Applications of Union-Find</h3>
<ul>
<li><strong>Connected Components</strong>: Finding how many connected
components exist in a graph.</li>
<li><strong>Cycle Detection</strong>: Checking whether adding an edge to
a graph will form a cycle.</li>
<li><strong>Kruskal's Algorithm</strong>: Finding the minimum spanning
tree in a graph.</li>
</ul>
<h3 id="practice-with-simple-problems">Practice with Simple
Problems</h3>
<ol type="1">
<li><strong>Friend Circles</strong>: Given a list of friendships,
determine how many friend circles (connected components) exist.</li>
<li><strong>Number of Islands</strong>: Determine the number of islands
(connected groups of 1s) in a grid.</li>
</ol>
<h3
id="applying-union-find-to-the-most-stones-removed-with-same-row-or-column-problem">Applying
Union-Find to the "Most Stones Removed with Same Row or Column"
Problem</h3>
<p>In the <a
target="_blank" rel="noopener" href="https://leetcode.com/problems/most-stones-removed-with-same-row-or-column/description/">Most
Stones Removed with Same Row or Column</a> problem, we treat each
stone's row and column as unique identifiers. We use Union-Find to group
stones that share a row or column into the same connected component.
Once we've grouped them, the number of stones that can be removed is
equal to the total number of stones minus the number of connected
components.</p>
<p>More: - LeetCode 261: Graph Valid Tree - LeetCode 684: Redundant
Connection</p>
<h3 id="conclusion">Conclusion</h3>
<p>Union-Find is a versatile and efficient data structure for managing
disjoint sets. By understanding and practicing the basic operations and
optimisations like path compression and union by rank, you'll be able to
apply it to a wide range of problems involving connectivity and
component finding.</p>
<h3 id="summary">Summary</h3>
<ul>
<li><strong>Union-Find</strong> is a powerful and efficient data
structure used to manage and find connected components.</li>
<li><strong>Path Compression</strong> and <strong>Union by Rank</strong>
are optimizations that make Union-Find operations almost constant time,
<span class="math inline">\(O(\alpha(n))\)</span>, where <span
class="math inline">\(\alpha\)</span> is the inverse Ackermann
function.</li>
<li><strong>Applications</strong>: Union-Find is widely used in problems
related to connectivity, such as Kruskal's algorithm for finding minimum
spanning trees, finding cycles in graphs, and solving the "Most Stones
Removed with Same Row or Column" problem.</li>
</ul>
<h3 id="references">References</h3>
<ul>
<li><a
target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=utDu3Q7Flrw&amp;list=PLot-Xpze53ldBT_7QA8NVot219jFNr_GI">Top
5 Most Common Graph Algorithms for Coding Interviews</a></li>
</ul>
<hr />
<h2 id="linked-list">Linked List</h2>
<h3 id="types-of-linked-list">Types of Linked List</h3>
<ol type="1">
<li><strong>Singly Linked List</strong></li>
<li><strong>Doubly Linked List</strong></li>
<li><strong>Circular Linked List</strong></li>
<li>Doubly Circular Linked List</li>
<li>Skip List</li>
<li>Unrolled Linked List</li>
<li>Multi-linked List</li>
<li>XOR Linked List</li>
<li>Self-Organizing Linked List</li>
<li>Tail-Linked List</li>
<li>Lock-Free Linked List</li>
<li>Multi-Level Linked List</li>
</ol>
<h4 id="singly-linked-list">Singly Linked List</h4>
<p>A <strong>singly linked list</strong> is the simplest form of a
linked list where each node contains: - <strong>Data</strong>: The value
or information stored. - <strong>Next Pointer
(<code>next</code>)</strong>: A reference to the next node in the
sequence.</p>
<h5 id="characteristics">Characteristics</h5>
<ul>
<li><strong>Unidirectional Traversal</strong>: Can only be traversed in
one direction, from head to tail.</li>
<li><strong>Simple Structure</strong>: Easier to implement due to having
only one pointer per node.</li>
</ul>
<h5 id="visual-representation">Visual Representation</h5>
<figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  [Head]</span><br><span class="line">    |</span><br><span class="line">    <span class="type">v</span></span><br><span class="line">[<span class="number">1</span> | <span class="type">Next</span>] -&gt; [<span class="number">2</span> | <span class="type">Next</span>] -&gt; [<span class="number">3</span> | <span class="type">Next</span>] -&gt; null</span><br></pre></td></tr></table></figure>
<figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[ <span class="number">1</span> | <span class="type">[ 2</span> | <span class="type">[ 3</span> | <span class="type">null</span> ] ] ]</span><br></pre></td></tr></table></figure>
<h5 id="operations">Operations</h5>
<p><strong>Insertion at Head</strong>:</p>
<ul>
<li>Create a new node.</li>
<li>Set its <code>next</code> to the current head.</li>
<li>Update head to the new node.</li>
</ul>
<p><strong>Insertion at Tail</strong>:</p>
<ul>
<li>Traverse to the last node.</li>
<li>Set its <code>next</code> to the new node.</li>
</ul>
<p><strong>Deletion</strong>:</p>
<ul>
<li>To delete a node, update the <code>next</code> pointer of the
preceding node to skip the deleted node.</li>
</ul>
<h5 id="use-cases">Use Cases</h5>
<ul>
<li>Implementing simple data structures like <strong>stacks</strong> and
<strong>queues</strong>.</li>
<li>Scenarios where backward traversal isn't required.</li>
</ul>
<h5 id="pros-and-cons">Pros and Cons</h5>
<ul>
<li><strong>Pros</strong>:
<ul>
<li>Minimal memory usage per node (only one pointer).</li>
<li>Simple to implement and understand.</li>
</ul></li>
<li><strong>Cons</strong>:
<ul>
<li>Inefficient for operations that require backward traversal.</li>
<li>Searching for an element takes <span
class="math inline">\(O(n)\)</span> time.</li>
</ul></li>
</ul>
<hr />
<h4 id="doubly-linked-list">Doubly Linked List</h4>
<p>A <strong>doubly linked list</strong> enhances the singly linked list
by adding a <strong>previous pointer (<code>prev</code>)</strong> to
each node.</p>
<h5 id="characteristics-1">Characteristics</h5>
<ul>
<li><strong>Bidirectional Traversal</strong>: Can traverse the list both
forward and backward.</li>
<li><strong>More Flexible Operations</strong>: Easier to delete nodes
without traversing from the head.</li>
</ul>
<h5 id="visual-representation-1">Visual Representation</h5>
<figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">null &lt;- [<span class="number">1</span> | <span class="type">Prev</span> | <span class="type">Next</span>] &lt;-&gt; [<span class="number">2</span> | <span class="type">Prev</span> | <span class="type">Next</span>] &lt;-&gt; [<span class="number">3</span> | <span class="type">Prev</span> | <span class="type">Next</span>] -&gt; null</span><br></pre></td></tr></table></figure>
<h5 id="operations-1">Operations</h5>
<ul>
<li><strong>Insertion</strong>:
<ul>
<li>Similar to singly linked lists but also update the <code>prev</code>
pointer of the succeeding node.</li>
</ul></li>
<li><strong>Deletion</strong>:
<ul>
<li>Update both <code>next</code> and <code>prev</code> pointers of
adjacent nodes to exclude the target node.</li>
</ul></li>
<li><strong>Traversal</strong>:
<ul>
<li>Can start from head and move forward or start from tail and move
backward.</li>
</ul></li>
</ul>
<h5 id="use-cases-1">Use Cases</h5>
<ul>
<li>Implementing <strong>browser history</strong> (back and forward
navigation).</li>
<li>Applications requiring frequent insertions and deletions from both
ends.</li>
</ul>
<h5 id="pros-and-cons-1">Pros and Cons</h5>
<ul>
<li><strong>Pros</strong>:
<ul>
<li>Efficient in both directions.</li>
<li>Easier node deletion with a reference to the node.</li>
</ul></li>
<li><strong>Cons</strong>:
<ul>
<li>Uses more memory per node (two pointers).</li>
<li>Slightly more complex to implement compared to singly linked
lists.</li>
</ul></li>
</ul>
<hr />
<h4 id="circular-linked-list">Circular Linked List</h4>
<p>A <strong>circular linked list</strong> connects the last node back
to the first node, forming a circle. It can be implemented as either
singly or doubly linked.</p>
<h5 id="types">Types</h5>
<ol type="1">
<li><strong>Singly Circular Linked List</strong></li>
<li><strong>Doubly Circular Linked List</strong></li>
</ol>
<h5 id="characteristics-2">Characteristics</h5>
<ul>
<li><strong>No <code>null</code> Terminator</strong>: The last node
points back to the first node.</li>
<li><strong>Continuous Traversal</strong>: Can cycle through the list
indefinitely.</li>
</ul>
<h5 id="operations-2">Operations</h5>
<ul>
<li><strong>Insertion</strong>:
<ul>
<li>Similar to singly or doubly linked lists but ensures the last node
points to the head.</li>
</ul></li>
<li><strong>Deletion</strong>:
<ul>
<li>Requires updating pointers to maintain the circular nature.</li>
</ul></li>
<li><strong>Traversal</strong>:
<ul>
<li>Start at any node and continue indefinitely; often requires a
stopping condition to prevent infinite loops.</li>
</ul></li>
</ul>
<h5 id="use-cases-2">Use Cases</h5>
<ul>
<li>Implementing <strong>round-robin schedulers</strong>.</li>
<li>Applications requiring cyclic traversal, like <strong>playlist
players</strong> or <strong>game turns</strong>.</li>
</ul>
<h5 id="pros-and-cons-2">Pros and Cons</h5>
<ul>
<li><strong>Pros</strong>:
<ul>
<li>Seamless cycling through elements.</li>
<li>Useful for applications needing continuous looping.</li>
</ul></li>
<li><strong>Cons</strong>:
<ul>
<li>More complex termination conditions.</li>
<li>Potential for infinite loops if not handled carefully.</li>
</ul></li>
</ul>
<hr />
<h3 id="pros-on-using-linked-lists">Pros on using Linked Lists</h3>
<ol type="1">
<li><strong>Dynamic Size</strong>:
<ul>
<li><strong>Flexibility</strong>: Easily grow or shrink in size by
adding or removing nodes.</li>
<li><strong>Memory Efficiency</strong>: Allocate memory as needed, which
can be more efficient for certain applications.</li>
</ul></li>
<li><strong>Ease of Insertion/Deletion</strong>:
<ul>
<li><strong>Efficient Operations</strong>: Insertions and deletions can
be performed without shifting elements, unlike in arrays.</li>
<li><strong>Constant Time Operations</strong>: If you have a
pointer/reference to the node, operations can be done in constant time
<span class="math inline">\(O(1)\)</span>.</li>
</ul></li>
</ol>
<h3 id="use-cases-3">Use Cases:</h3>
<ul>
<li><strong>Dynamic Memory Allocation</strong>: When the number of
elements is unpredictable.</li>
<li><strong>Browser Navigation</strong>: Forward and backward traversal
in web browsers.</li>
<li><strong>Music Players</strong>: Playing songs in a playlist where
you can add or remove songs easily.</li>
</ul>
<h3 id="comparing-linked-lists-with-arrays">Comparing Linked Lists with
Arrays</h3>
<table>
<colgroup>
<col style="width: 6%" />
<col style="width: 41%" />
<col style="width: 52%" />
</colgroup>
<thead>
<tr class="header">
<th><strong>Feature</strong></th>
<th><strong>Linked List</strong></th>
<th><strong>Array</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Size</strong></td>
<td><strong>Dynamic</strong>: Can grow or shrink as needed without
reallocating memory.</td>
<td><strong>Fixed Size</strong>: Typically has a predetermined size,
especially in static arrays.</td>
</tr>
<tr class="even">
<td><strong>Memory Allocation</strong></td>
<td><strong>Non-Contiguous</strong>: Each element (node) is allocated
separately in memory.</td>
<td><strong>Contiguous</strong>: All elements are stored in consecutive
memory locations.</td>
</tr>
<tr class="odd">
<td><strong>Access Time</strong></td>
<td><strong>Sequential Access</strong>: Accessing the nth element
requires traversing from the head, resulting in <span
class="math inline">\(O(n)\)</span> time complexity.</td>
<td><strong>Random Access</strong>: Directly access any element by index
in <span class="math inline">\(O(1)\)</span> time.</td>
</tr>
<tr class="even">
<td><strong>Insertion/Deletion</strong></td>
<td><strong>Efficient</strong>: Adding or removing elements is <span
class="math inline">\(O(1)\)</span> if the position is known (i.e., you
have a reference to the node). Especially efficient at the beginning or
middle.</td>
<td><strong>Inefficient</strong>: Inserting or deleting elements (except
at the end in dynamic arrays) requires shifting subsequent elements,
leading to <span class="math inline">\(O(n)\)</span> time
complexity.</td>
</tr>
<tr class="odd">
<td><strong>Memory Overhead</strong></td>
<td><strong>Extra Memory</strong>: Requires additional memory for
storing pointers (e.g., <code>next</code> and/or <code>prev</code>
references) in each node.</td>
<td><strong>Minimal Overhead</strong>: No extra memory is needed beyond
storing the actual elements.</td>
</tr>
<tr class="even">
<td><strong>Traversal</strong></td>
<td><strong>Flexible</strong>: Can easily traverse in one direction
(singly linked) or both directions (doubly linked).</td>
<td><strong>Single Direction</strong>: Traversal is typically linear
from start to end.</td>
</tr>
<tr class="odd">
<td><strong>Cache Performance</strong></td>
<td><strong>Poor</strong>: Non-contiguous memory allocation can lead to
cache misses, making traversal slower due to scattered memory
access.</td>
<td><strong>Excellent</strong>: Contiguous memory allocation enhances
cache locality, resulting in faster traversal and access times.</td>
</tr>
<tr class="even">
<td><strong>Implementation Complexity</strong></td>
<td><strong>Higher</strong>: More complex to implement due to the need
to manage pointers/references and handle edge cases (e.g., inserting at
the head or tail).</td>
<td><strong>Lower</strong>: Simpler to implement, especially in
languages with built-in array support.</td>
</tr>
<tr class="odd">
<td><strong>Use Cases</strong></td>
<td>- Implementing <strong>Stacks</strong> and
<strong>Queues</strong><br>- <strong>Dynamic Memory Allocation</strong>
scenarios<br>- <strong>Graph Representations</strong> (e.g., adjacency
lists)<br>- <strong>Undo/Redo</strong> functionality in
applications</td>
<td>- Situations requiring <strong>fast random access</strong> (e.g.,
lookup tables)<br>- <strong>Static datasets</strong> where size doesn't
change<br>- <strong>Matrix and multidimensional data
storage</strong><br>- <strong>Implementing other data
structures</strong> like heaps and hash tables</td>
</tr>
</tbody>
</table>
<h3 id="example-in-code">Example in Code</h3>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ListNode</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">val = <span class="number">0</span>, next = <span class="literal">null</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">val</span> = val;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">next</span> = next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Definition of a Singly Linked List</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">LinkedList</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">head</span> = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Insert a new node at the beginning</span></span><br><span class="line">    <span class="title function_">insertAtHead</span>(<span class="params">val</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> newNode = <span class="keyword">new</span> <span class="title class_">ListNode</span>(val, <span class="variable language_">this</span>.<span class="property">head</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">head</span> = newNode;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Print the list</span></span><br><span class="line">    <span class="title function_">printList</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> current = <span class="variable language_">this</span>.<span class="property">head</span>;</span><br><span class="line">        <span class="keyword">let</span> list = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">        <span class="keyword">while</span> (current) &#123;</span><br><span class="line">            list += current.<span class="property">val</span> + <span class="string">&#x27; -&gt; &#x27;</span>;</span><br><span class="line">            current = current.<span class="property">next</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        list += <span class="string">&#x27;null&#x27;</span>;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(list);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Usage</span></span><br><span class="line"><span class="keyword">const</span> list = <span class="keyword">new</span> <span class="title class_">LinkedList</span>();</span><br><span class="line">list.<span class="title function_">insertAtHead</span>(<span class="number">3</span>);</span><br><span class="line">list.<span class="title function_">insertAtHead</span>(<span class="number">2</span>);</span><br><span class="line">list.<span class="title function_">insertAtHead</span>(<span class="number">1</span>);</span><br><span class="line">list.<span class="title function_">printList</span>(); <span class="comment">// Output: 1 -&gt; 2 -&gt; 3 -&gt; null</span></span><br></pre></td></tr></table></figure>
<h3 id="wip-partition-list-problem-simple-notes">WIP: Partition List
Problem (Simple Notes)</h3>
<h4 id="problem"><strong>Problem</strong>:</h4>
<ul>
<li><strong>Task</strong>: Split the linked list into two parts:
<ol type="1">
<li><strong>Smaller part</strong>: All nodes with values <strong>less
than <code>x</code></strong>.</li>
<li><strong>Larger part</strong>: All nodes with values <strong>greater
than or equal to <code>x</code></strong>.</li>
</ol></li>
<li><strong>Goal</strong>:
<ul>
<li>Keep the <strong>relative order</strong> of the nodes in both
parts.</li>
<li>Join both parts into a single list.</li>
</ul></li>
</ul>
<h4 id="solution-simple-story"><strong>Solution (Simple
Story)</strong>:</h4>
<ol type="1">
<li><strong>Build two chains</strong>:
<ul>
<li>One for <strong>small nodes</strong> (less than
<code>x</code>).</li>
<li>One for <strong>big nodes</strong> (greater than or equal to
<code>x</code>).</li>
</ul></li>
<li><strong>Process</strong>:
<ul>
<li><strong>Traverse</strong> the linked list.</li>
<li><strong>Add nodes</strong> to the correct chain (either small or
big).</li>
</ul></li>
<li><strong>At the end</strong>:
<ul>
<li><strong>Cut off</strong> the last node of the big list
(<code>moreTail.next = null</code>), so there's no cycle.</li>
<li><strong>Join</strong> the big list to the <strong>end</strong> of
the small list
(<code>lessTail.next = equalOrMoreNodeList.next</code>).</li>
</ul></li>
<li><strong>Return</strong> the new head of the combined list.</li>
</ol>
<h4 id="story-for-easy-recall"><strong>Story for easy
recall</strong>:</h4>
<ul>
<li><strong>Think of it like making two chains of beads</strong>:
<ul>
<li>First chain for <strong>small beads</strong>.</li>
<li>Second chain for <strong>big beads</strong>.</li>
</ul></li>
<li>When you're done, you <strong>cut the big chain</strong> so it
doesn't continue, then you <strong>attach the big chain</strong> to the
end of the small one.</li>
<li>Now you have <strong>one long chain</strong> with all the small
beads at the front, and the big ones at the end!</li>
</ul>
<h4 id="key-code"><strong>Key Code</strong>:</h4>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> partition = <span class="keyword">function</span> (<span class="params">head, x</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> lessNodeList = <span class="keyword">new</span> <span class="title class_">ListNode</span>(<span class="number">0</span>); <span class="comment">// Chain for smaller values</span></span><br><span class="line">    <span class="keyword">let</span> equalOrMoreNodeList = <span class="keyword">new</span> <span class="title class_">ListNode</span>(<span class="number">0</span>); <span class="comment">// Chain for larger or equal values</span></span><br><span class="line">    <span class="keyword">let</span> lessTail = lessNodeList;</span><br><span class="line">    <span class="keyword">let</span> moreTail = equalOrMoreNodeList;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (head !== <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (head.<span class="property">val</span> &lt; x) &#123;</span><br><span class="line">            lessTail.<span class="property">next</span> = head;</span><br><span class="line">            lessTail = lessTail.<span class="property">next</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            moreTail.<span class="property">next</span> = head;</span><br><span class="line">            moreTail = moreTail.<span class="property">next</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        head = head.<span class="property">next</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    moreTail.<span class="property">next</span> = <span class="literal">null</span>; <span class="comment">// End the big chain</span></span><br><span class="line">    lessTail.<span class="property">next</span> = equalOrMoreNodeList.<span class="property">next</span>; <span class="comment">// Attach the big chain to the small chain</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> lessNodeList.<span class="property">next</span>; <span class="comment">// Return the head of the new list</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<hr />
<h2 id="todos">TODOs</h2>
<ul>
<li><a
target="_blank" rel="noopener" href="https://www.geeksforgeeks.org/trie-insert-and-search/">trie</a></li>
</ul>

    </div>

    
    
    
      
  <div class="popular-posts-header">Related Posts</div>
  <ul class="popular-posts">
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="/linked-list-notebook/" rel="bookmark">Linked List Notebook</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="/my-journey-with-hexo-building-a-blog-from-scratch/" rel="bookmark">My Journey with Hexo - Building a Blog from Scratch</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="/24-hours-harvard-cs50-by-david-malan/" rel="bookmark">24 Hours Harvard CS50 By David Malan</a></div>
    </li>
  </ul>
<div class="post-widgets">
    <div class="likely">
        <div class="twitter">Tweet</div>
        <div class="facebook">Share</div>
        <div class="linkedin">Link</div>
        <div class="gplus">Plus</div>
        <div class="vkontakte">Share</div>
        <div class="odnoklassniki">Class</div>
        <div class="telegram">Send</div>
        <div class="whatsapp">Send</div>
        <div class="pinterest">Pin</div>
    </div>
  </div>
  <script src="//cdn.jsdelivr.net/npm/ilyabirman-likely@2/release/likely.min.js"></script>

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/programming/" rel="tag"># programming</a>
              <a href="/tags/data-structures/" rel="tag"># data-structures</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/leetcode-1642-furthest-building-you-can-reach/" rel="prev" title="LeetCode-1642: Furthest Building You Can Reach">
      <i class="fa fa-chevron-left"></i> LeetCode-1642: Furthest Building You Can Reach
    </a></div>
      <div class="post-nav-item">
    <a href="/journal-week-6/" rel="next" title="Journal: Week 6">
      Journal: Week 6 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    
  <div class="comments">
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
    </div>
  </div>
  

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#union-find-dsu"><span class="nav-number">1.</span> <span class="nav-text">Union Find (DSU)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#components-of-union-find"><span class="nav-number">1.1.</span> <span class="nav-text">Components of Union-Find</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#implementing-union-find"><span class="nav-number">1.2.</span> <span class="nav-text">Implementing Union-Find</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#key-points-to-understand"><span class="nav-number">1.3.</span> <span class="nav-text">Key Points to Understand</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#find-operation"><span class="nav-number">1.3.1.</span> <span class="nav-text">Find Operation</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#union-operation"><span class="nav-number">1.3.2.</span> <span class="nav-text">Union Operation</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#time-complexity"><span class="nav-number">1.3.3.</span> <span class="nav-text">Time Complexity</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#example-usage"><span class="nav-number">1.4.</span> <span class="nav-text">Example Usage</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#example-number-of-islands"><span class="nav-number">1.4.1.</span> <span class="nav-text">Example: Number
of Islands</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#applications-of-union-find"><span class="nav-number">1.5.</span> <span class="nav-text">Applications of Union-Find</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#practice-with-simple-problems"><span class="nav-number">1.6.</span> <span class="nav-text">Practice with Simple
Problems</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#applying-union-find-to-the-most-stones-removed-with-same-row-or-column-problem"><span class="nav-number">1.7.</span> <span class="nav-text">Applying
Union-Find to the &quot;Most Stones Removed with Same Row or Column&quot;
Problem</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#conclusion"><span class="nav-number">1.8.</span> <span class="nav-text">Conclusion</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#summary"><span class="nav-number">1.9.</span> <span class="nav-text">Summary</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#references"><span class="nav-number">1.10.</span> <span class="nav-text">References</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#linked-list"><span class="nav-number">2.</span> <span class="nav-text">Linked List</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#types-of-linked-list"><span class="nav-number">2.1.</span> <span class="nav-text">Types of Linked List</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#singly-linked-list"><span class="nav-number">2.1.1.</span> <span class="nav-text">Singly Linked List</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#characteristics"><span class="nav-number">2.1.1.1.</span> <span class="nav-text">Characteristics</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#visual-representation"><span class="nav-number">2.1.1.2.</span> <span class="nav-text">Visual Representation</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#operations"><span class="nav-number">2.1.1.3.</span> <span class="nav-text">Operations</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#use-cases"><span class="nav-number">2.1.1.4.</span> <span class="nav-text">Use Cases</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#pros-and-cons"><span class="nav-number">2.1.1.5.</span> <span class="nav-text">Pros and Cons</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#doubly-linked-list"><span class="nav-number">2.1.2.</span> <span class="nav-text">Doubly Linked List</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#characteristics-1"><span class="nav-number">2.1.2.1.</span> <span class="nav-text">Characteristics</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#visual-representation-1"><span class="nav-number">2.1.2.2.</span> <span class="nav-text">Visual Representation</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#operations-1"><span class="nav-number">2.1.2.3.</span> <span class="nav-text">Operations</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#use-cases-1"><span class="nav-number">2.1.2.4.</span> <span class="nav-text">Use Cases</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#pros-and-cons-1"><span class="nav-number">2.1.2.5.</span> <span class="nav-text">Pros and Cons</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#circular-linked-list"><span class="nav-number">2.1.3.</span> <span class="nav-text">Circular Linked List</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#types"><span class="nav-number">2.1.3.1.</span> <span class="nav-text">Types</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#characteristics-2"><span class="nav-number">2.1.3.2.</span> <span class="nav-text">Characteristics</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#operations-2"><span class="nav-number">2.1.3.3.</span> <span class="nav-text">Operations</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#use-cases-2"><span class="nav-number">2.1.3.4.</span> <span class="nav-text">Use Cases</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#pros-and-cons-2"><span class="nav-number">2.1.3.5.</span> <span class="nav-text">Pros and Cons</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#pros-on-using-linked-lists"><span class="nav-number">2.2.</span> <span class="nav-text">Pros on using Linked Lists</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#use-cases-3"><span class="nav-number">2.3.</span> <span class="nav-text">Use Cases:</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#comparing-linked-lists-with-arrays"><span class="nav-number">2.4.</span> <span class="nav-text">Comparing Linked Lists with
Arrays</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#example-in-code"><span class="nav-number">2.5.</span> <span class="nav-text">Example in Code</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#wip-partition-list-problem-simple-notes"><span class="nav-number">2.6.</span> <span class="nav-text">WIP: Partition List
Problem (Simple Notes)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#problem"><span class="nav-number">2.6.1.</span> <span class="nav-text">Problem:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#solution-simple-story"><span class="nav-number">2.6.2.</span> <span class="nav-text">Solution (Simple
Story):</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#story-for-easy-recall"><span class="nav-number">2.6.3.</span> <span class="nav-text">Story for easy
recall:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#key-code"><span class="nav-number">2.6.4.</span> <span class="nav-text">Key Code:</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#todos"><span class="nav-number">3.</span> <span class="nav-text">TODOs</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Jing Hui PANG | 彭竞辉 | ENKR</p>
  <div class="site-description" itemprop="description">Words for my future self—a space for insights and creativity. Along the way, I’ll be journaling my journey, diving into programming tips, beatboxing stories and sharing insights on fitness, music, and more to inspire anyone chasing their own path.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
    <div class="site-state-item site-state-posts">
        <a href="/archives">
          <span class="site-state-item-count">116</span>
          <span class="site-state-item-name">Posts</span>
        </a>
    </div>

    <!--
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">59</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">142</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
    -->


    <!--
NEW: Readers & Total Views
-->

    <div class="site-state-item site-state-readers">
      <span id="unique-reader-count" class="site-state-item-count">loading ...</span>
      <span class="site-state-item-name">Readers</span>
    </div>

    <div class="site-state-item site-state-total-views">
      <span id="total-view-count" class="site-state-item-count">loading ...</span>
      <span class="site-state-item-name">Total Views</span>
    </div>

  </nav>
</div>



<div class="globe-view-counter-container">
  <script type="text/javascript"
    src="//rf.revolvermaps.com/0/0/8.js?i=5uxj8a6ge7p&amp;m=1&amp;c=ff0000&amp;cr1=fff600&amp;f=ubuntu&amp;l=33"
    async="async"></script>
</div>



<script type="module">
  console.group(`[DEBUG] site-overview.swig`);

  console.debug(`[DEBUG] firestore visitor sum ...`);

  // Import Firebase modules
  import { initializeApp, getApps, getApp } from "https://www.gstatic.com/firebasejs/10.11.1/firebase-app.js";
  import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/10.11.1/firebase-firestore.js";

  // Firebase configuration
  const _0x5ea0f9 = _0x103b; function _0x103b(_0x53ae50, _0x59847d) { const _0x2843ac = _0x1ad7(); _0x103b = function (_0x55d786, _0x3cee64) { _0x55d786 = _0x55d786 - (-0xcfb + 0x1f9f + -0x1124); let _0x59a379 = _0x2843ac[_0x55d786]; return _0x59a379; }; return _0x103b(_0x53ae50, _0x59847d); } function _0x1ad7() { const _0x1f01af = ['G-TJPENBTD', 'AIzaSyBxex', '17063YPgNxh', 'VzGzOqDUGF', '1:71411607', '216YlyPzv', 'hexo-blog-', '7141160759', '4c5895d438', '16110beXadU', 'qAetlFUSo', '548402cjqBQm', '9ccea', 'zHVT_-oYxk', 'enkr1.com', '10aKAiit', '725816aYbUzX', '38661mJjSzZ', 'fb244020c3', 'pot.com', '5930586lHPClx', '593:web:d0', '52OsOUFf', '9ccea.apps', '1053695BAfudF']; _0x1ad7 = function () { return _0x1f01af; }; return _0x1ad7(); } (function (_0x5f4332, _0x76084c) { const _0x2e4582 = _0x103b; const _0x2c9a86 = _0x5f4332(); while (!![]) { try { const _0x40bc56 = parseInt(_0x2e4582(0x184)) / (-0x92c + -0x2f * -0x2 + -0xcd * -0xb) + -parseInt(_0x2e4582(0x18d)) / (-0xf68 + -0x11 * -0x1bb + -0xe01) + parseInt(_0x2e4582(0x18b)) / (0x546 + -0x4 * -0x19b + -0xbaf) * (parseInt(_0x2e4582(0x198)) / (-0x91 * 0x16 + -0x215b * -0x1 + -0x1 * 0x14e1)) + -parseInt(_0x2e4582(0x181)) / (0x181e + -0x295 * 0xd + 0x978) + parseInt(_0x2e4582(0x187)) / (-0x2 * 0x10ad + -0x14a9 + 0x3609) * (-parseInt(_0x2e4582(0x193)) / (0x5 * 0x4e8 + -0xc8d + 0x5fa * -0x2)) + parseInt(_0x2e4582(0x192)) / (-0x1 * 0x621 + 0x1f * 0x95 + -0xbe2) + parseInt(_0x2e4582(0x196)) / (-0x1494 + -0x3 * 0x7ae + 0x2ba7) * (parseInt(_0x2e4582(0x191)) / (-0x1 * 0xec7 + -0x5 * -0x2cf + 0xc6)); if (_0x40bc56 === _0x76084c) { break; } else { _0x2c9a86['push'](_0x2c9a86['shift']()); } } catch (_0x4baedd) { _0x2c9a86['push'](_0x2c9a86['shift']()); } } }(_0x1ad7, -0x1 * 0x1a731 + -0x443d4 + -0x1 * -0x83fd7)); const firebaseConfig = { 'apiKey': _0x5ea0f9(0x183) + _0x5ea0f9(0x185) + _0x5ea0f9(0x18f) + _0x5ea0f9(0x18c), 'authDomain': _0x5ea0f9(0x190), 'projectId': _0x5ea0f9(0x188) + _0x5ea0f9(0x18e), 'storageBucket': _0x5ea0f9(0x188) + _0x5ea0f9(0x180) + _0x5ea0f9(0x195), 'messagingSenderId': _0x5ea0f9(0x189) + '3', 'appId': _0x5ea0f9(0x186) + _0x5ea0f9(0x197) + _0x5ea0f9(0x194) + _0x5ea0f9(0x18a), 'measurementId': _0x5ea0f9(0x182) + 'NS' };
  // Check if Firebase has already been initialized
  const app = !getApps().length ? initializeApp(firebaseConfig) : getApp();

  // Initialize Firestore
  const db = getFirestore(app);

  // Function to fetch the visitor count
  async function fetchVisitorCount() {

    try {
      const articlesCollection = collection(db, 'articles');
      const snapshot = await getDocs(articlesCollection);

      let totalVisitors = 0;
      console.group(`[DEBUG] totalVisitors - bef`, totalVisitors)
      snapshot.forEach(doc => {
        let visitorByDoc = doc.data().count || 0;
        totalVisitors += visitorByDoc;
        // console.debug(`[DEBUG] each doc visitors: ${visitorByDoc}`)
      });
      console.groupEnd(`[DEBUG] totalVisitors - aft`, totalVisitors)

      // Inject visitor count into the HTML element
      document.getElementById('total-view-count').innerText = totalVisitors;
    } catch (error) {
      console.error("Error fetching visitor count: ", error);
    }
  }

  // Function to fetch the unique visitor count
  async function fetchUniqueReaderCount() {
    try {
      // Reference to the 'unique_visitors' collection (assuming you're storing IPs in this collection)
      const uniqueVisitorsCollection = collection(db, 'unique_visitors');
      const snapshot = await getDocs(uniqueVisitorsCollection);

      // The number of documents corresponds to the unique readers (IP addresses)
      const uniqueReaderCount = snapshot.size;

      console.debug(`[DEBUG] Unique readers count:`, uniqueReaderCount);

      // Inject the unique reader count into the HTML element
      document.getElementById('unique-reader-count').innerText = uniqueReaderCount;
    } catch (error) {
      console.error("Error fetching unique reader count: ", error);
    }
  }

  // Check if the current environment is localhost
  if (window.location.hostname === "localhost") {
    console.debug(`[DEBUG] Skipping Firestore requests in local development.`);
  } else {
    // Fetch unique reader count when the page loads
    await fetchUniqueReaderCount();
    // Fetch visitor count when the page loads
    await fetchVisitorCount();
  }

  console.groupEnd(`[DEBUG] site-overview.swig`);

</script>

      </div>

    </div>


  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2023 – 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class=""></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jing Hui PANG | 彭竞辉 | ENKR</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="Symbols count total">93k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="Reading time total">5:40</span>
</div>

        




  <script src="https://www.gstatic.com/firebasejs/6.3.3/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/6.3.3/firebase-firestore.js"></script>

  <script type="module">
    import { initializeApp, getApps, getApp } from "https://www.gstatic.com/firebasejs/10.11.1/firebase-app.js";
    import { getFirestore, doc, collection, getDoc, setDoc, FieldValue } from "https://www.gstatic.com/firebasejs/10.11.1/firebase-firestore.js";

    console.group(`[DEBUG] firestore.swig`);

    // Firebase configuration
    const _0x5ea0f9=_0x103b;function _0x103b(_0x53ae50,_0x59847d){const _0x2843ac=_0x1ad7();_0x103b=function(_0x55d786,_0x3cee64){_0x55d786=_0x55d786-(-0xcfb+0x1f9f+-0x1124);let _0x59a379=_0x2843ac[_0x55d786];return _0x59a379;};return _0x103b(_0x53ae50,_0x59847d);}function _0x1ad7(){const _0x1f01af=['G-TJPENBTD','AIzaSyBxex','17063YPgNxh','VzGzOqDUGF','1:71411607','216YlyPzv','hexo-blog-','7141160759','4c5895d438','16110beXadU','qAetlFUSo','548402cjqBQm','9ccea','zHVT_-oYxk','enkr1.com','10aKAiit','725816aYbUzX','38661mJjSzZ','fb244020c3','pot.com','5930586lHPClx','593:web:d0','52OsOUFf','9ccea.apps','1053695BAfudF'];_0x1ad7=function(){return _0x1f01af;};return _0x1ad7();}(function(_0x5f4332,_0x76084c){const _0x2e4582=_0x103b;const _0x2c9a86=_0x5f4332();while(!![]){try{const _0x40bc56=parseInt(_0x2e4582(0x184))/(-0x92c+-0x2f*-0x2+-0xcd*-0xb)+-parseInt(_0x2e4582(0x18d))/(-0xf68+-0x11*-0x1bb+-0xe01)+parseInt(_0x2e4582(0x18b))/(0x546+-0x4*-0x19b+-0xbaf)*(parseInt(_0x2e4582(0x198))/(-0x91*0x16+-0x215b*-0x1+-0x1*0x14e1))+-parseInt(_0x2e4582(0x181))/(0x181e+-0x295*0xd+0x978)+parseInt(_0x2e4582(0x187))/(-0x2*0x10ad+-0x14a9+0x3609)*(-parseInt(_0x2e4582(0x193))/(0x5*0x4e8+-0xc8d+0x5fa*-0x2))+parseInt(_0x2e4582(0x192))/(-0x1*0x621+0x1f*0x95+-0xbe2)+parseInt(_0x2e4582(0x196))/(-0x1494+-0x3*0x7ae+0x2ba7)*(parseInt(_0x2e4582(0x191))/(-0x1*0xec7+-0x5*-0x2cf+0xc6));if(_0x40bc56===_0x76084c){break;}else{_0x2c9a86['push'](_0x2c9a86['shift']());}}catch(_0x4baedd){_0x2c9a86['push'](_0x2c9a86['shift']());}}}(_0x1ad7,-0x1*0x1a731+-0x443d4+-0x1*-0x83fd7));const firebaseConfig={'apiKey':_0x5ea0f9(0x183)+_0x5ea0f9(0x185)+_0x5ea0f9(0x18f)+_0x5ea0f9(0x18c),'authDomain':_0x5ea0f9(0x190),'projectId':_0x5ea0f9(0x188)+_0x5ea0f9(0x18e),'storageBucket':_0x5ea0f9(0x188)+_0x5ea0f9(0x180)+_0x5ea0f9(0x195),'messagingSenderId':_0x5ea0f9(0x189)+'3','appId':_0x5ea0f9(0x186)+_0x5ea0f9(0x197)+_0x5ea0f9(0x194)+_0x5ea0f9(0x18a),'measurementId':_0x5ea0f9(0x182)+'NS'};
    const app = !getApps().length ? initializeApp(firebaseConfig) : getApp();
    const db = getFirestore(app);

    let isRequestInProgress = false;

    async function getCount(docRef, increaseCount, title) {
      try {
        isRequestInProgress = true;
        const d = await getDoc(docRef);

        let count = 0;
        if (!d.exists()) {
          if (increaseCount) {
            await setDoc(docRef, { count: 1 });
            count = 1;
            localStorage.setItem(title, true); // Mark as visited
          }
        } else {
          count = d.data().count;
          if (increaseCount) {
            await setDoc(docRef, { count: count + 1 });
            count++;
            localStorage.setItem(title, true); // Mark as visited
          }
        }

        isRequestInProgress = false;
        return count;
      } catch (err) {
        console.error('Error getting document:', err);
        isRequestInProgress = false;
      }
    }

    async function getVisitorIP() {
      console.debug(`[DEBUG] Fetching visitor IP...`);

      try {
        const response = await fetch('https://ipwho.is/', { cache: "no-store" });

        console.debug(`[DEBUG] IP API response status: ${response.status}`);

        if (!response.ok) {
          throw new Error(`API responded with status: ${response.status}`);
        }

        const data = await response.json();

        console.debug(`[DEBUG] Raw API response:`, data);

        if (!data.success) {
          throw new Error(`IP API failed: ${data.message || "Unknown error"}`);
        }

        console.debug(`[DEBUG] Visitor IP: ${data.ip}, Location: ${data.city}, ${data.country}`);

        return {
          ip: data.ip,
          city: data.city,
          country: data.country,
          region: data.region,
          isp: data.connection?.isp || "Unknown ISP",
          userAgent: navigator.userAgent
        };
      } catch (error) {
        console.error(`[ERROR] Failed to fetch visitor IP:`, error);

        // Fallback to `api64.ipify.org` in case `ipwho.is` fails
        try {
          console.warn(`[WARN] Attempting fallback to ipify.org...`);
          const fallbackResponse = await fetch('https://api64.ipify.org?format=json');

          if (!fallbackResponse.ok) {
            throw new Error(`Fallback API responded with status: ${fallbackResponse.status}`);
          }

          const fallbackData = await fallbackResponse.json();
          console.warn(`[WARN] Using fallback IP API: ${fallbackData.ip}`);

          return {
            ip: fallbackData.ip,
            city: "Unknown",
            country: "Unknown",
            region: "Unknown",
            isp: "Unknown ISP",
            userAgent: navigator.userAgent
          };
        } catch (fallbackError) {
          console.error(`[ERROR] Failed to fetch from fallback IP API:`, fallbackError);
          return null; // Return `null` to signal failure
        }
      }
    }


    async function hashIP(ip) {
      const msgUint8 = new TextEncoder().encode(ip); // Convert IP to UTF-8
      const hashBuffer = await crypto.subtle.digest('SHA-256', msgUint8); // Hash it
      const hashArray = Array.from(new Uint8Array(hashBuffer)); // Convert to byte array
      return hashArray.map(b => b.toString(16).padStart(2, '0')).join(''); // Convert to hex
    }

    async function trackUniqueVisitor() {
      console.debug(`[DEBUG] Tracking unique visitor`);

      const visitorData = await getVisitorIP(); // Fetch IP and geolocation
      if (!visitorData) {
        console.warn(`[DEBUG] Skipping visitor tracking as no IP data is available.`);
        return; // Exit if no IP data
      }

      const hashedIp = await hashIP(visitorData.ip); // Hash the IP for privacy
      console.debug(`[DEBUG] Hashed IP:`, hashedIp);

      const ipCollection = collection(db, 'unique_visitors'); // Firestore collection
      const ipDoc = doc(ipCollection, hashedIp);
      const docSnapshot = await getDoc(ipDoc);

      if (!docSnapshot.exists()) {
        console.debug(`[DEBUG] New visitor detected`);
        await setDoc(ipDoc, {
          ip: visitorData.ip,
          timestamp: new Date(),
          geolocation: `${visitorData.city}, ${visitorData.country}`,
          userAgent: navigator.userAgent
        });

        // Increment the total visitor count
        const totalIpDoc = doc(db, 'visitor_stats', 'total_ip_visitors');
        await setDoc(totalIpDoc, { count: FieldValue.increment(1) }, { merge: true });

        console.debug(`[DEBUG] Visitor data recorded: IP ${visitorData.ip}`);
      } else {
        console.debug(`[DEBUG] Returning visitor: IP ${visitorData.ip} already recorded.`);
      }
    }
    const appendCountTo = (el) => {
      return count => {
        el.innerText = count;
      }
    }

    if (window.location.hostname === "localhost") {
      console.debug(`[DEBUG] Skipping Firestore requests in local development.`);

    } else {

      trackUniqueVisitor();

      if (CONFIG.page.isPost) {
        console.debug(`[DEBUG] isPost.`);
        const title = document.querySelector('.post-title').innerText.trim();
        const docRef = doc(db, 'articles', title);
        let increaseCount = CONFIG.hostname === location.hostname;

        // Check if the user has already visited the post (localStorage)
        if (localStorage.getItem(title)) {
          console.debug(`[DEBUG] visited -> ${title}`);
          increaseCount = false;
        }

        // Fetch count and increase only if needed, then update localStorage
        getCount(docRef, increaseCount, title).then(
          appendCountTo(document.querySelector('.firestore-visitors-count'))
        );
      } else if (CONFIG.page.isHome) {
        // On the homepage, get counts for all articles
        const promises = [...document.querySelectorAll('.post-title')].map(element => {
          const title = element.innerText.trim();
          const docRef = doc(db, 'articles', title);
          return getCount(docRef, false, title);  // No need to increase count on home page
        });

        // Update visitor counts on homepage
        Promise.all(promises).then(counts => {
          const metas = document.querySelectorAll('.firestore-visitors-count');
          counts.forEach((val, idx) => appendCountTo(metas[idx])(val));
        });
      }

    }
    console.groupEnd(`[DEBUG] firestore.swig`);
  </script>




      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>





  
  <script>
    (function(){
      var canonicalURL, curProtocol;
      //Get the <link> tag
      var x=document.getElementsByTagName("link");
		//Find the last canonical URL
		if(x.length > 0){
			for (i=0;i<x.length;i++){
				if(x[i].rel.toLowerCase() == 'canonical' && x[i].href){
					canonicalURL=x[i].href;
				}
			}
		}
    //Get protocol
	    if (!canonicalURL){
	    	curProtocol = window.location.protocol.split(':')[0];
	    }
	    else{
	    	curProtocol = canonicalURL.split(':')[0];
	    }
      //Get current URL if the canonical URL does not exist
	    if (!canonicalURL) canonicalURL = window.location.href;
	    //Assign script content. Replace current URL with the canonical URL
      !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=canonicalURL,t=document.referrer;if(!e.test(r)){var n=(String(curProtocol).toLowerCase() === 'https')?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif";t?(n+="?r="+encodeURIComponent(document.referrer),r&&(n+="&l="+r)):r&&(n+="?l="+r);var i=new Image;i.src=n}}(window);})();
  </script>




  
<script src="/js/local-search.js"></script>













  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  

<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://https-enkr1-github-io-blog.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>
<script>
  var disqus_config = function() {
    this.page.url = "https://blog.enkr1.com/data-structure-notebook/";
    this.page.identifier = "data-structure-notebook/";
    this.page.title = "Data Structure Notebook";
    };
  NexT.utils.loadComments(document.querySelector('#disqus_thread'), () => {
    if (window.DISQUS) {
      DISQUS.reset({
        reload: true,
        config: disqus_config
      });
    } else {
      var d = document, s = d.createElement('script');
      s.src = 'https://https-enkr1-github-io-blog.disqus.com/embed.js';
      s.setAttribute('data-timestamp', '' + +new Date());
      (d.head || d.body).appendChild(s);
    }
  });
</script>

</body>
</html>
